<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>Intro_to_R.knit</title>
    <meta charset="utf-8" />
    <script src="libs/header-attrs/header-attrs.js"></script>
    <link href="libs/panelset/panelset.css" rel="stylesheet" />
    <script src="libs/panelset/panelset.js"></script>
    <link rel="stylesheet" href="xaringan-themer.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">


class: center, middle, hide-logo



&lt;style type="text/css"&gt;
pre {
background: #F8F8F8;
max-width: 100%;
overflow-x: scroll;
}
&lt;/style&gt;

&lt;style type="text/css"&gt;
.scroll-output {
height: 80%;
overflow-y: scroll;
}
&lt;/style&gt;





# Introduction to R

## by

&lt;img src="GraphicsSlides/Logo RUG hell.png" width="50%" /&gt;

##### Authors/Presenters: Nina, Sven, Mathias
##### Last updated: _2022-09-28 14:30:34_

---

class: hide-logo, center, middle

&lt;img src="GraphicsSlides/Logo RUG hell.png" width="50%" /&gt;

### Welcome to our first Meeting

- Picture, Presentation etc. 

---

### Goals for today's session

- Introduction / Welcome

- Why should you learn R

- Installing R and R Studio on your Machine 

- Getting a first overview over R Studio 

- Getting to know Base R commands 

- Load excel and CSV files into R

---

### Why should you learn R? 

- Excel can be extremely messy, especially when working with multiple data sheets

&lt;br&gt;

&lt;img src="GraphicsSlides/excel_mess.png" width="110%" /&gt;

---

### Why should you learn R? 

.pull-left[
  
&lt;img src="GraphicsSlides/plot_paper.png" width="100%" /&gt;
]

.center[
&lt;img src="GraphicsSlides/excel_data.png" width="120%" /&gt;
]
---

### Why should you learn R? 

.scroll-output[

```r
trade_data &lt;- read_csv("DataSets/trade_data.csv", col_types = cols(`Period 1,2` = "d"))

out_plot &lt;- trade_data |&gt;
  rename(Country = `Commercial partner`, Period = `Period 1,2`, Tariff = `Kind of rate`,
         CHF_Value = `Value (CHF)`, Duties_CHF = `Amount of customs duties (CHF)`) |&gt;
  select(Country, Period, Tariff, Duties_CHF, Product) |&gt;
  mutate(
    Tariff = case_when(Tariff == "Total trade" ~ "Total_Trade",
                       Tariff == "10 - Normal rate" ~ "Normal_Rate",
                       Tariff == "20 - Reduced rate" ~ "Reduced_Rate",
                       Tariff == "30 - Exemption" ~ "Exemption",
                       TRUE ~ "Other")) |&gt;
  group_by(Country, Period, Tariff, Product) |&gt;
  summarize(Duties_CHF = max(Duties_CHF)) |&gt;
  pivot_wider(names_from = Tariff, values_from = Duties_CHF) |&gt;
  ungroup() |&gt;
  replace_na(list(Normal_Rate = 0,
                  Total_Trade = 0,
                  Reduced_Rate = 0,
                  Exemption = 0)) |&gt;
  mutate(Util_Rate = (Exemption + Reduced_Rate) / Total_Trade) |&gt;
  filter(Country == "India") |&gt;
  ggplot(aes(x = Period, y = Util_Rate, color = as_factor(Product)))+
  geom_point(size = 3)+
  geom_line(size = 0.8)+
  scale_y_continuous(breaks = seq(0,1.2, by = 0.2), labels = percent_format())+
  scale_x_continuous(breaks = seq(2000,2018, by = 2))+
  expand_limits(y = c(0, 1))+
  theme_minimal()+
  labs(title = "Adjusted Utilization Rate 2000 - 2018")+
  theme(plot.title  = element_text(size = 22, hjust = 0.5, face = "bold"),
        axis.title  = element_blank(),
        axis.text = element_text(size = 14),
        panel.grid.minor.x = element_blank(),
        panel.grid.major.x = element_blank(),
        legend.position = "bottom",
        legend.title = element_blank(),
        legend.text = element_text(size = 12))
```
]
---

.center[

&lt;br&gt;
&lt;br&gt;

&lt;img src="Intro_to_R_files/figure-html/unnamed-chunk-9-1.png" width="100%" /&gt;
]
---

### Why should you learn R? 

.pull-left[
&lt;img src="Intro_to_R_files/figure-html/unnamed-chunk-10-1.png" width="100%" /&gt;
]

.pull-right[

- **TBD: Advantages here**
- Most of all: Reproducible!

&lt;br&gt;

&lt;img src="GraphicsSlides/strong v weak.png" width="100%" /&gt;

]

---

### Shiny Apps: Host your work online for external users

&lt;div&gt;
&lt;center&gt;
&lt;iframe src="https://svenglinz.shinyapps.io/InteractivePlot/?showcase=0" width="900px" height="610px" frameBorder="0"&gt;
&lt;/iframe&gt;
&lt;/center&gt;
&lt;/div&gt;

**TBD: Error in der Shiny app**

### Basic Concepts - Data Types and Objects
=======
---

### Just shortly: Data Types and Objects

In our R environment, we can store all sorts of objects and data.
The are various objects such as *vectors*, *matrices*, *lists* and *tibbles*.

All objects are of a certain type (for example Integer, Double, Character, Logical)
and it is important to always make sure that your data is formatted as the right type.

.pull-left[
.center[
&lt;img src="GraphicsSlides/wrong_data_type.png" width="65%" /&gt;
]
]

.pull-right[
Example Integers and Strings


```r
first_number &lt;- "100"
second_number &lt;- 200
first_number + second_number
```

```
## Error in first_number + second_number: non-numeric argument to binary operator
```
]

---

### Data Types and Objects

Logical Values can be represented by TRUE/FALSE as well as T/F
--&gt; When performing mathematical operations, TRUE = 1, and FALSE = 0

- Logical Values can be represented by:
  - TRUE/FALSE (alternatively: T/F)

- When performing mathematical operations, TRUE = 1, and FALSE = 0:


```r
a &lt;- TRUE
b &lt;- T
c &lt;- FALSE

sum(a,b,c)
```

```
## [1] 2
```

---

### Data Types and Objects

- Vectors contain multiple numbers, strings, logical values etc.
- They can only contain data of **one type**, so you cannot put a number and a string into the same vector!

.pull-left[

```r
first_vector &lt;- c(1,2,3,4)
second_vector &lt;- c(5,6,7,8)
third_vector &lt;- c("hello", 100,
                  "test", FALSE)

first_vector + second_vector
```

```
## [1]  6  8 10 12
```

```r
third_vector
```

```
## [1] "hello" "100"   "test"  "FALSE"
```
]

.pull-right[

&lt;br&gt;

&lt;img src="GraphicsSlides/vectors.png" width="140%" /&gt;
]

---

### Data Types and Objects

.scroll-output[

- Usually, you will work with rectangular data in `tibbles` or `data frames`
- `tibble`: two dimensional frame made of different columns
  - each column is a distinct vector (i.e. different data types possible)


```r
tibble_test &lt;- tibble(x = first_vector, 
                      y = second_vector,
                      z = third_vector)
tibble_test
```

```
## # A tibble: 4 × 3
##       x     y z    
##   &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;
## 1     1     5 hello
## 2     2     6 100  
## 3     3     7 test 
## 4     4     8 FALSE
```

A list is like a vector but can contain different data types:


```r
list_test &lt;- list(vector = first_vector,
                  tibble = tibble_test,
                  string = first_number,
                  number = as.numeric(first_number))

list_test
```

```
## $vector
## [1] 1 2 3 4
## 
## $tibble
## # A tibble: 4 × 3
##       x     y z    
##   &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;
## 1     1     5 hello
## 2     2     6 100  
## 3     3     7 test 
## 4     4     8 FALSE
## 
## $string
## [1] "100"
## 
## $number
## [1] 100
```

]

---

## Working with Tibbles

.pull-left[


&lt;img src="GraphicsSlides/palmerpenguins_package.png" width="50%" /&gt;
]

.pull-right[

```r
#install.packages("palmerpenguins")
penguins &lt;- palmerpenguins::penguins
```
]


```r
head(penguins, 4)
```

```
## # A tibble: 4 × 8
##   species island bill_length_mm bill_depth_mm flipper_length_… body_mass_g sex  
##   &lt;fct&gt;   &lt;fct&gt;           &lt;dbl&gt;         &lt;dbl&gt;            &lt;int&gt;       &lt;int&gt; &lt;fct&gt;
## 1 Adelie  Torge…           39.1          18.7              181        3750 male 
## 2 Adelie  Torge…           39.5          17.4              186        3800 fema…
## 3 Adelie  Torge…           40.3          18                195        3250 fema…
## 4 Adelie  Torge…           NA            NA                 NA          NA &lt;NA&gt; 
## # … with 1 more variable: year &lt;int&gt;
```

---

### Working with Tibbles - Simple Subsetting

You can subset every tibble as follows:

- row and column:
`tibble_name[row_index, column_index/name] `
- row only
`tibble_name[row_index,]`
- column only
`tibble_name[column_index/name]` OR `tibble_name[,column_index/name]`

Now Lets get the second row and third Column of the penguins data

-- 


```r
penguins[2,3]
penguins[2, "bill_length_mm"]
```
What if we want multiple rows/ columns or if we want to delete an entry?


```r
penguins[c(1:5, 200:202), c(2,5)]
penguins[-c(1:4),1]
```

---

### Subsetting with Logical Conditions

If we look for a specific value within our data set (column, row or both), we can 
subset the data frame by logical conditions (==, &amp;, |, &gt;, &gt;= etc...)

.center[
&lt;img src="GraphicsSlides/spongebob_search.gif" width="40%" /&gt;
]


```r
head(penguins[penguins$sex == "male" &amp; penguins$island == "Biscoe",],2)
```

```
## # A tibble: 2 × 8
##   species island bill_length_mm bill_depth_mm flipper_length_… body_mass_g sex  
##   &lt;fct&gt;   &lt;fct&gt;           &lt;dbl&gt;         &lt;dbl&gt;            &lt;int&gt;       &lt;int&gt; &lt;fct&gt;
## 1 Adelie  Biscoe           37.7          18.7              180        3600 male 
## 2 Adelie  Biscoe           38.2          18.1              185        3950 male 
## # … with 1 more variable: year &lt;int&gt;
```

---

### Task 1: Replace all observations of island = "Dream" with "Unknown"

Tip: First filter out the column Island and within this column, all Values which are Dream
Then: Assign a new value to these values with &lt;-

--


```r
penguins[penguins$island == "Dream", "island"] &lt;- "Unknown"
```

```
## Error:
## ! Assigned data `"Unknown"` must be compatible with existing data.
## ℹ Error occurred for column `island`.
## ✖ Can't convert from &lt;character&gt; to &lt;factor&lt;ccf33&gt;&gt; due to loss of generality.
## • Locations: 1.
```

---

Lets first convert the data type from factor to string!


```r
penguins$island &lt;- as.character(penguins$island)
```

--

Now lets do it again 


```r
penguins[penguins$island == "Dream", "island"] &lt;- "Unknown"
head(penguins)
```

```
## # A tibble: 6 × 8
##   species island bill_length_mm bill_depth_mm flipper_length_… body_mass_g sex  
##   &lt;fct&gt;   &lt;chr&gt;           &lt;dbl&gt;         &lt;dbl&gt;            &lt;int&gt;       &lt;int&gt; &lt;fct&gt;
## 1 Adelie  Torge…           39.1          18.7              181        3750 male 
## 2 Adelie  Torge…           39.5          17.4              186        3800 fema…
## 3 Adelie  Torge…           40.3          18                195        3250 fema…
## 4 Adelie  Torge…           NA            NA                 NA          NA &lt;NA&gt; 
## 5 Adelie  Torge…           36.7          19.3              193        3450 fema…
## 6 Adelie  Torge…           39.3          20.6              190        3650 male 
## # … with 1 more variable: year &lt;int&gt;
```

--

And if needed, lets reformat back to factor 


```r
penguins$island &lt;- as.factor(penguins$island)
```

---
### Task 2: How would we see the difference in body mass between female and male penguins?


```r
library(dplyr)
glimpse(penguins)
```

```
## Rows: 344
## Columns: 8
## $ species           &lt;fct&gt; Adelie, Adelie, Adelie, Adelie, Adelie, Adelie, Adel…
## $ island            &lt;fct&gt; Torgersen, Torgersen, Torgersen, Torgersen, Torgerse…
## $ bill_length_mm    &lt;dbl&gt; 39.1, 39.5, 40.3, NA, 36.7, 39.3, 38.9, 39.2, 34.1, …
## $ bill_depth_mm     &lt;dbl&gt; 18.7, 17.4, 18.0, NA, 19.3, 20.6, 17.8, 19.6, 18.1, …
## $ flipper_length_mm &lt;int&gt; 181, 186, 195, NA, 193, 190, 181, 195, 193, 190, 186…
## $ body_mass_g       &lt;int&gt; 3750, 3800, 3250, NA, 3450, 3650, 3625, 4675, 3475, …
## $ sex               &lt;fct&gt; male, female, female, NA, female, male, female, male…
## $ year              &lt;int&gt; 2007, 2007, 2007, 2007, 2007, 2007, 2007, 2007, 2007…
```

---

### Step 1: Subsetting

- Subset the data frame for one sex


```r
penguins[penguins$sex == "male",]
```

```
## # A tibble: 179 × 8
##    species island    bill_length_mm bill_depth_mm flipper_length_mm body_mass_g
##    &lt;fct&gt;   &lt;fct&gt;              &lt;dbl&gt;         &lt;dbl&gt;             &lt;int&gt;       &lt;int&gt;
##  1 Adelie  Torgersen           39.1          18.7               181        3750
##  2 &lt;NA&gt;    &lt;NA&gt;                NA            NA                  NA          NA
##  3 Adelie  Torgersen           39.3          20.6               190        3650
##  4 Adelie  Torgersen           39.2          19.6               195        4675
##  5 &lt;NA&gt;    &lt;NA&gt;                NA            NA                  NA          NA
##  6 &lt;NA&gt;    &lt;NA&gt;                NA            NA                  NA          NA
##  7 &lt;NA&gt;    &lt;NA&gt;                NA            NA                  NA          NA
##  8 &lt;NA&gt;    &lt;NA&gt;                NA            NA                  NA          NA
##  9 Adelie  Torgersen           38.6          21.2               191        3800
## 10 Adelie  Torgersen           34.6          21.1               198        4400
## # … with 169 more rows, and 2 more variables: sex &lt;fct&gt;, year &lt;int&gt;
```
---

### Step 2: Get body mass

- Extract the vector you are interested in with the $ sign


```r
penguins[penguins$sex == "male",]$body_mass_g
```

```
##   [1] 3750   NA 3650 4675   NA   NA   NA   NA 3800 4400 4500 4200 3600 3950 3800
##  [16] 3550 3950 3900 3900 4150 3950 4650 3900 4400 4600 3425   NA 4150 4300 4050
##  [31] 3700 3800 3750 4400 4050 3950 4100 4450 3900 4150 4250 3900 4000 4700 4200
##  [46] 3550 3800 3950 4300 4450 4300 4350 4100 4725 4250 3550 3900 4775 4600 4275
##  [61] 4075 3775 3325 3500 3875 4000 4300 4000 3500 4475 3900 3975 4250 3475 3725
##  [76] 3650 4250 3750 4000 5700 5700 5400 5200 5150 5550 5850 5850 6300 5350 5700
##  [91] 5050 5100   NA 5650 5550 5250 6050 5400 5250 5350 5700 4750 5550 5400 5300
## [106] 5300 5000 5050 5000 5550 5300 5650 5700   NA 5800 5550 5000 5100 5800 6000
## [121] 5950 5450 5350 5600 5300 5550 5400 5650 5200 4925 5250 5600 5500   NA 5500
## [136] 5500 5500 5950 5500 5850   NA 6000   NA 5750 5400 3900 3650 3725 3750 3700
## [151] 3775 4050 4050 3300 4400 3400 3800 4150 3800 4550 4300 4100 3600 4800 4500
## [166] 3950 3550 4450 4300 3250 3950 4050 3450 4050 3800 3950 4000 3775 4100
```

---

### Step 3: Calculate the mean

- use the native `mean()` function to calculate the mean body mass

--


```r
mean(penguins[penguins$sex == "male",]$body_mass_g)
```

--


```
## [1] NA
```

What is this?

.center[
&lt;img src="GraphicsSlides/shock.jpg" width="40%" /&gt;
]

---

### Back to Step 2: Get body mass

There are `NA` in the data!


```r
penguins[penguins$sex == "male",]$body_mass_g
```

```
##   [1] 3750   NA 3650 4675   NA   NA   NA   NA 3800 4400 4500 4200 3600 3950 3800
##  [16] 3550 3950 3900 3900 4150 3950 4650 3900 4400 4600 3425   NA 4150 4300 4050
##  [31] 3700 3800 3750 4400 4050 3950 4100 4450 3900 4150 4250 3900 4000 4700 4200
##  [46] 3550 3800 3950 4300 4450 4300 4350 4100 4725 4250 3550 3900 4775 4600 4275
##  [61] 4075 3775 3325 3500 3875 4000 4300 4000 3500 4475 3900 3975 4250 3475 3725
##  [76] 3650 4250 3750 4000 5700 5700 5400 5200 5150 5550 5850 5850 6300 5350 5700
##  [91] 5050 5100   NA 5650 5550 5250 6050 5400 5250 5350 5700 4750 5550 5400 5300
## [106] 5300 5000 5050 5000 5550 5300 5650 5700   NA 5800 5550 5000 5100 5800 6000
## [121] 5950 5450 5350 5600 5300 5550 5400 5650 5200 4925 5250 5600 5500   NA 5500
## [136] 5500 5500 5950 5500 5850   NA 6000   NA 5750 5400 3900 3650 3725 3750 3700
## [151] 3775 4050 4050 3300 4400 3400 3800 4150 3800 4550 4300 4100 3600 4800 4500
## [166] 3950 3550 4450 4300 3250 3950 4050 3450 4050 3800 3950 4000 3775 4100
```

---

### Back to Step 3: Calculate the mean


```r
mean(penguins[penguins$sex == "male",]$body_mass_g,
*    na.rm = T)
```

```
## [1] 4545.685
```

.center[
&lt;img src="GraphicsSlides/flex tape.png" width="40%" /&gt;
]

---

&lt;img src="GraphicsSlides/wait_a_minute.png" width="40%" /&gt;

How do we know what arguments a function such as `mean()` can take?


```r
args(mean.default)
```

```
## function (x, trim = 0, na.rm = FALSE, ...) 
## NULL
```

or just check out the R documentation 
https://www.rdocumentation.org/packages/base/versions/3.6.2/topics/mean

or the easier way:

```r
?mean()
```

```
## starting httpd help server ... done
```

---

### Step 4: Compare male and female penguins


```r
tibble(
  mean_g = c(mean(penguins[penguins$sex == "male",]$body_mass_g,
                  na.rm = T),
             mean(penguins[penguins$sex == "female",]$body_mass_g,
                  na.rm = T)),
  sex = c("male",
          "female")
)
```

```
## # A tibble: 2 × 2
##   mean_g sex   
##    &lt;dbl&gt; &lt;chr&gt; 
## 1  4546. male  
## 2  3862. female
```

---

### Task 2: How many penguins live on each island?

- Also: How many islands are there?


```r
library(dplyr)
glimpse(penguins)
```

```
## Rows: 344
## Columns: 8
## $ species           &lt;fct&gt; Adelie, Adelie, Adelie, Adelie, Adelie, Adelie, Adel…
## $ island            &lt;fct&gt; Torgersen, Torgersen, Torgersen, Torgersen, Torgerse…
## $ bill_length_mm    &lt;dbl&gt; 39.1, 39.5, 40.3, NA, 36.7, 39.3, 38.9, 39.2, 34.1, …
## $ bill_depth_mm     &lt;dbl&gt; 18.7, 17.4, 18.0, NA, 19.3, 20.6, 17.8, 19.6, 18.1, …
## $ flipper_length_mm &lt;int&gt; 181, 186, 195, NA, 193, 190, 181, 195, 193, 190, 186…
## $ body_mass_g       &lt;int&gt; 3750, 3800, 3250, NA, 3450, 3650, 3625, 4675, 3475, …
## $ sex               &lt;fct&gt; male, female, female, NA, female, male, female, male…
## $ year              &lt;int&gt; 2007, 2007, 2007, 2007, 2007, 2007, 2007, 2007, 2007…
```

---

### Step 1: Do we have 1 observation per penguin?

.scroll-output[
- Look at documentation or know from data (in obvious cases like this)
- Here: counting islands will be sufficient


```r
penguins$island
```

```
##   [1] Torgersen Torgersen Torgersen Torgersen Torgersen Torgersen Torgersen
##   [8] Torgersen Torgersen Torgersen Torgersen Torgersen Torgersen Torgersen
##  [15] Torgersen Torgersen Torgersen Torgersen Torgersen Torgersen Biscoe   
##  [22] Biscoe    Biscoe    Biscoe    Biscoe    Biscoe    Biscoe    Biscoe   
##  [29] Biscoe    Biscoe    Unknown   Unknown   Unknown   Unknown   Unknown  
##  [36] Unknown   Unknown   Unknown   Unknown   Unknown   Unknown   Unknown  
##  [43] Unknown   Unknown   Unknown   Unknown   Unknown   Unknown   Unknown  
##  [50] Unknown   Biscoe    Biscoe    Biscoe    Biscoe    Biscoe    Biscoe   
##  [57] Biscoe    Biscoe    Biscoe    Biscoe    Biscoe    Biscoe    Biscoe   
##  [64] Biscoe    Biscoe    Biscoe    Biscoe    Biscoe    Torgersen Torgersen
##  [71] Torgersen Torgersen Torgersen Torgersen Torgersen Torgersen Torgersen
##  [78] Torgersen Torgersen Torgersen Torgersen Torgersen Torgersen Torgersen
##  [85] Unknown   Unknown   Unknown   Unknown   Unknown   Unknown   Unknown  
##  [92] Unknown   Unknown   Unknown   Unknown   Unknown   Unknown   Unknown  
##  [99] Unknown   Unknown   Biscoe    Biscoe    Biscoe    Biscoe    Biscoe   
## [106] Biscoe    Biscoe    Biscoe    Biscoe    Biscoe    Biscoe    Biscoe   
## [113] Biscoe    Biscoe    Biscoe    Biscoe    Torgersen Torgersen Torgersen
## [120] Torgersen Torgersen Torgersen Torgersen Torgersen Torgersen Torgersen
## [127] Torgersen Torgersen Torgersen Torgersen Torgersen Torgersen Unknown  
## [134] Unknown   Unknown   Unknown   Unknown   Unknown   Unknown   Unknown  
## [141] Unknown   Unknown   Unknown   Unknown   Unknown   Unknown   Unknown  
## [148] Unknown   Unknown   Unknown   Unknown   Unknown   Biscoe    Biscoe   
## [155] Biscoe    Biscoe    Biscoe    Biscoe    Biscoe    Biscoe    Biscoe   
## [162] Biscoe    Biscoe    Biscoe    Biscoe    Biscoe    Biscoe    Biscoe   
## [169] Biscoe    Biscoe    Biscoe    Biscoe    Biscoe    Biscoe    Biscoe   
## [176] Biscoe    Biscoe    Biscoe    Biscoe    Biscoe    Biscoe    Biscoe   
## [183] Biscoe    Biscoe    Biscoe    Biscoe    Biscoe    Biscoe    Biscoe   
## [190] Biscoe    Biscoe    Biscoe    Biscoe    Biscoe    Biscoe    Biscoe   
## [197] Biscoe    Biscoe    Biscoe    Biscoe    Biscoe    Biscoe    Biscoe   
## [204] Biscoe    Biscoe    Biscoe    Biscoe    Biscoe    Biscoe    Biscoe   
## [211] Biscoe    Biscoe    Biscoe    Biscoe    Biscoe    Biscoe    Biscoe   
## [218] Biscoe    Biscoe    Biscoe    Biscoe    Biscoe    Biscoe    Biscoe   
## [225] Biscoe    Biscoe    Biscoe    Biscoe    Biscoe    Biscoe    Biscoe   
## [232] Biscoe    Biscoe    Biscoe    Biscoe    Biscoe    Biscoe    Biscoe   
## [239] Biscoe    Biscoe    Biscoe    Biscoe    Biscoe    Biscoe    Biscoe   
## [246] Biscoe    Biscoe    Biscoe    Biscoe    Biscoe    Biscoe    Biscoe   
## [253] Biscoe    Biscoe    Biscoe    Biscoe    Biscoe    Biscoe    Biscoe   
## [260] Biscoe    Biscoe    Biscoe    Biscoe    Biscoe    Biscoe    Biscoe   
## [267] Biscoe    Biscoe    Biscoe    Biscoe    Biscoe    Biscoe    Biscoe   
## [274] Biscoe    Biscoe    Biscoe    Unknown   Unknown   Unknown   Unknown  
## [281] Unknown   Unknown   Unknown   Unknown   Unknown   Unknown   Unknown  
## [288] Unknown   Unknown   Unknown   Unknown   Unknown   Unknown   Unknown  
## [295] Unknown   Unknown   Unknown   Unknown   Unknown   Unknown   Unknown  
## [302] Unknown   Unknown   Unknown   Unknown   Unknown   Unknown   Unknown  
## [309] Unknown   Unknown   Unknown   Unknown   Unknown   Unknown   Unknown  
## [316] Unknown   Unknown   Unknown   Unknown   Unknown   Unknown   Unknown  
## [323] Unknown   Unknown   Unknown   Unknown   Unknown   Unknown   Unknown  
## [330] Unknown   Unknown   Unknown   Unknown   Unknown   Unknown   Unknown  
## [337] Unknown   Unknown   Unknown   Unknown   Unknown   Unknown   Unknown  
## [344] Unknown  
## Levels: Biscoe Torgersen Unknown
```
]

---

### Step 2: Use `table()`


```r
table(penguins$island)
```

```
## 
##    Biscoe Torgersen   Unknown 
##       168        52       124
```

--

- Quick outlook on `tidyverse` alternative


```r
penguins %&gt;%
* count(island)
```

```
## # A tibble: 3 × 2
##   island        n
##   &lt;fct&gt;     &lt;int&gt;
## 1 Biscoe      168
## 2 Torgersen    52
## 3 Unknown     124
```

---

### Task 3: What species live on island "Biscoe"?

- Eventually: Calculate a percentage for each species on island Biscoe

### Step 1: Subset for island


```r
penguins[penguins$island == "Biscoe",]
```

```
## # A tibble: 168 × 8
##    species island bill_length_mm bill_depth_mm flipper_length_mm body_mass_g
##    &lt;fct&gt;   &lt;fct&gt;           &lt;dbl&gt;         &lt;dbl&gt;             &lt;int&gt;       &lt;int&gt;
##  1 Adelie  Biscoe           37.8          18.3               174        3400
##  2 Adelie  Biscoe           37.7          18.7               180        3600
##  3 Adelie  Biscoe           35.9          19.2               189        3800
##  4 Adelie  Biscoe           38.2          18.1               185        3950
##  5 Adelie  Biscoe           38.8          17.2               180        3800
##  6 Adelie  Biscoe           35.3          18.9               187        3800
##  7 Adelie  Biscoe           40.6          18.6               183        3550
##  8 Adelie  Biscoe           40.5          17.9               187        3200
##  9 Adelie  Biscoe           37.9          18.6               172        3150
## 10 Adelie  Biscoe           40.5          18.9               180        3950
## # … with 158 more rows, and 2 more variables: sex &lt;fct&gt;, year &lt;int&gt;
```

---

### Step 2: Get species vector


```r
penguins[penguins$island == "Biscoe",]$species
```

```
##   [1] Adelie Adelie Adelie Adelie Adelie Adelie Adelie Adelie Adelie Adelie
##  [11] Adelie Adelie Adelie Adelie Adelie Adelie Adelie Adelie Adelie Adelie
##  [21] Adelie Adelie Adelie Adelie Adelie Adelie Adelie Adelie Adelie Adelie
##  [31] Adelie Adelie Adelie Adelie Adelie Adelie Adelie Adelie Adelie Adelie
##  [41] Adelie Adelie Adelie Adelie Gentoo Gentoo Gentoo Gentoo Gentoo Gentoo
##  [51] Gentoo Gentoo Gentoo Gentoo Gentoo Gentoo Gentoo Gentoo Gentoo Gentoo
##  [61] Gentoo Gentoo Gentoo Gentoo Gentoo Gentoo Gentoo Gentoo Gentoo Gentoo
##  [71] Gentoo Gentoo Gentoo Gentoo Gentoo Gentoo Gentoo Gentoo Gentoo Gentoo
##  [81] Gentoo Gentoo Gentoo Gentoo Gentoo Gentoo Gentoo Gentoo Gentoo Gentoo
##  [91] Gentoo Gentoo Gentoo Gentoo Gentoo Gentoo Gentoo Gentoo Gentoo Gentoo
## [101] Gentoo Gentoo Gentoo Gentoo Gentoo Gentoo Gentoo Gentoo Gentoo Gentoo
## [111] Gentoo Gentoo Gentoo Gentoo Gentoo Gentoo Gentoo Gentoo Gentoo Gentoo
## [121] Gentoo Gentoo Gentoo Gentoo Gentoo Gentoo Gentoo Gentoo Gentoo Gentoo
## [131] Gentoo Gentoo Gentoo Gentoo Gentoo Gentoo Gentoo Gentoo Gentoo Gentoo
## [141] Gentoo Gentoo Gentoo Gentoo Gentoo Gentoo Gentoo Gentoo Gentoo Gentoo
## [151] Gentoo Gentoo Gentoo Gentoo Gentoo Gentoo Gentoo Gentoo Gentoo Gentoo
## [161] Gentoo Gentoo Gentoo Gentoo Gentoo Gentoo Gentoo Gentoo
## Levels: Adelie Chinstrap Gentoo
```

---

### Step 3: Ol' reliable `table()`


```r
table(penguins[penguins$island == "Biscoe",]$species)
```

```
## 
##    Adelie Chinstrap    Gentoo 
##        44         0       124
```

- Can you calculate a percentage from this?

--

- The answer is: No, convert to data frame first.

--&gt; A data frame is similar to a tibble, however, sometimes the arguments the functions 
need to coerce an element of class "table" are different. Here, `as.data.frame()` is clearly easier :)


```r
my_table &lt;- table(penguins[penguins$island == "Biscoe",]$species)

*as.data.frame(my_table)
```

```
##        Var1 Freq
## 1    Adelie   44
## 2 Chinstrap    0
## 3    Gentoo  124
```

### What about Tibbles?
---

Alternatively, with `as_tibble()`


```r
as_tibble(my_table, .name_repair = "unique")
```

If you are interested, run the following commands!

&gt;class(my_table)
&gt;methods(as_tibble)
&gt;methods(as.data.frame)
&gt;https://tibble.tidyverse.org/reference/as_tibble.html
---

### Step 4: Create a percentage column


```r
freq_table &lt;-
  table(penguins[penguins$island == "Biscoe",]$species)
freq_table &lt;- as.data.frame(freq_table)
```

- Create a new column to the right dividing the observation by the sum of `Freq`

--


```r
freq_table[, "Percentage"] &lt;- freq_table[,"Freq"]/sum(freq_table$Freq)

freq_table
```

```
##        Var1 Freq Percentage
## 1    Adelie   44  0.2619048
## 2 Chinstrap    0  0.0000000
## 3    Gentoo  124  0.7380952
```

---

### Outlook on `Tidyverse`: Join us in one of the next sessions

- Not only faster to calculate percentages for one island...


```r
penguins %&gt;%
  filter(island == "Biscoe") %&gt;%
  count(species) %&gt;%
  mutate(percentage = n/sum(n))
```

```
## # A tibble: 2 × 3
##   species     n percentage
##   &lt;fct&gt;   &lt;int&gt;      &lt;dbl&gt;
## 1 Adelie     44      0.262
## 2 Gentoo    124      0.738
```

---

### Outlook on `Tidyverse`: Join us in one of the next sessions

- ...but for all combinations as well.


```r
penguins %&gt;%
  group_by(island) %&gt;%
  count(species) %&gt;%
  transmute(island, species,
            percentage = n/sum(n)) %&gt;%
  pivot_wider(names_from = species, values_from = percentage)
```

```
## # A tibble: 3 × 4
## # Groups:   island [3]
##   island    Adelie Gentoo Chinstrap
##   &lt;fct&gt;      &lt;dbl&gt;  &lt;dbl&gt;     &lt;dbl&gt;
## 1 Biscoe     0.262  0.738    NA    
## 2 Torgersen  1     NA        NA    
## 3 Unknown    0.452 NA         0.548
```

---

### Task 4: Linear relationship between bill length and body mass

.scroll-output[

- Console output is boring to look at: Plot the linear relationship between bill length and body mass with base R


```r
penguins[, c("body_mass_g", "bill_length_mm")]
```


```
## # A tibble: 6 × 2
##   body_mass_g bill_length_mm
##         &lt;int&gt;          &lt;dbl&gt;
## 1        3750           39.1
## 2        3800           39.5
## 3        3250           40.3
## 4          NA           NA  
## 5        3450           36.7
## 6        3650           39.3
```
]

---

### Step 1: Which chart type?

- for linear relationships, we can plot a regression line in a scatter plot
- independent (predictor) variable on the x-axis
- dependent (response) variable on the y-axis

.center[
&lt;img src="GraphicsSlides/scatter.png" width="45%" /&gt;
]

---

### Step 2: Use `plot()`


```r
plot(x = penguins$bill_length_mm, y = penguins$body_mass_g)
```

&lt;img src="Intro_to_R_files/figure-html/unnamed-chunk-59-1.png" width="75%" /&gt;

---

### Step 3: Add a regression line


```r
plot(x = penguins$bill_length_mm, y = penguins$body_mass_g)
*abline(lm(penguins$body_mass_g ~ penguins$bill_length_mm),
*      col = "blue", lwd = 2, lty = 2)
```

&lt;img src="Intro_to_R_files/figure-html/unnamed-chunk-60-1.png" width="75%" /&gt;


---

### Step 4: Your Go

- Try it again for bill_depth_mm (predictor) on the same y variable

--


```r
plot(x = penguins$bill_depth_mm, y = penguins$body_mass_g)
abline(lm(penguins$body_mass_g ~ penguins$bill_depth_mm),
       col = "blue", lwd = 2, lty = 2)
```

&lt;img src="Intro_to_R_files/figure-html/unnamed-chunk-61-1.png" width="75%" /&gt;

---

### Are these two different species?


```r
plot(x = penguins$bill_depth_mm, y = penguins$body_mass_g)
abline(lm(penguins$body_mass_g ~ penguins$bill_depth_mm),
       col = "blue", lwd = 2, lty = 2)
```

&lt;img src="Intro_to_R_files/figure-html/unnamed-chunk-62-1.png" width="75%" /&gt;

---

### Outlook on `Tidyverse`


```r
penguins %&gt;%
  ggplot(aes(x = bill_depth_mm, y = body_mass_g, colour = species)) +
  geom_point(alpha = 0.5) +
  geom_smooth(method = "lm", se = F, lty = 2)
```

&lt;img src="Intro_to_R_files/figure-html/unnamed-chunk-63-1.png" width="90%" /&gt;

---

# More Tasks

.scroll-output[
- summary statistics by group "species"


```r
lapply(penguins[, c("bill_length_mm", "bill_depth_mm")] %&gt;%
         na.omit(),
       mean)
```

```
## $bill_length_mm
## [1] 43.92193
## 
## $bill_depth_mm
## [1] 17.15117
```
]

---

# That's it for today!

**Some finishing words**

For further questions, feel free to reach out to us. Make sure to stay updated on our socials and via our website where all resources and dates are also published.

&lt;br&gt;

.center[
&lt;img src="GraphicsSlides/Logo RUG hell.png" width="60%" /&gt;

**[Website](https://rusergroup-sg.ch/) | [Instagram](https://www.instagram.com/rusergroupstgallen/?hl=en) | [Twitter](https://twitter.com/rusergroupsg)**

]

---

class: middle, inverse, hide-logo

# Thank you for attending!

<em style="color:#404040">The material provided in this presentation including any information, tools, features, content and any images incorporated in the presentation, is solely for your lawful, personal, private use. You may not modify, republish, or post anything you obtain from this presentation, including anything you download from our website, unless you first obtain our written consent. You may not engage in systematic retrieval of data or other content from this website. We request that you not create any kind of hyperlink from any other site to ours unless you first obtain our written permission.</em>
    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"highlightStyle": "github",
"highlightLines": true,
"countIncrementalSlides": false
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
// add `data-at-shortcutkeys` attribute to <body> to resolve conflicts with JAWS
// screen reader (see PR #262)
(function(d) {
  let res = {};
  d.querySelectorAll('.remark-help-content table tr').forEach(tr => {
    const t = tr.querySelector('td:nth-child(2)').innerText;
    tr.querySelectorAll('td:first-child .key').forEach(key => {
      const k = key.innerText;
      if (/^[a-z]$/.test(k)) res[k] = t;  // must be a single letter (key)
    });
  });
  d.body.setAttribute('data-at-shortcutkeys', JSON.stringify(res));
})(document);
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>
<style>
.logo {
  background-image: url(GraphicsSlides/Logo\ RUG\ hell.png);
  background-size: contain;
  background-repeat: no-repeat;
  position: absolute;
  bottom: -85px;
  left: 1em;
  width: 80px;
  height: 128px;
  z-index: 0;
}
</style>

<script>
document
  .querySelectorAll(
    '.remark-slide-content' +
    ':not(.title-slide)' +
    // add additional classes to exclude here, e.g.
    // ':not(.inverse)' +
    ':not(.hide-logo)'
  )
  .forEach(el => {
    el.innerHTML += '<div class="logo"></div>';
  });
</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
